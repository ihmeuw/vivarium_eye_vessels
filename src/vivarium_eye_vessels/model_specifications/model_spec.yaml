components:
    vivarium_eye_vessels.components:
        - particles.Particle3D()
        - particles.PathFreezer()
        - particles.PathSplitter()
        # - particles.PathExtinction()
        # - particles.FrozenParticleRepulsion()
        # - particles.PathDLA()
        - boundaries.EllipsoidContainment()
        - boundaries.CylinderExclusion()
        # - boundaries.MagneticRepulsion()
        - visualizer.ParticleVisualizer3D()

configuration:
    randomness:
        random_seed: 42
    time:
        start:
            year: 2025
            month: 1
            day: 1
        end:
            year: 2025
            month: 9
            day: 1
        step_size: .1 # Days
    population:
        population_size: 1000

    # Base particle configuration
    particles:
        step_size: 0.05
        overall_max_velocity_change: 0.1
        initial_velocity_range: [-0.05, 0.05]
        initial_circle:
            center: [1.0, 0.0, 0.0]    # Center of the frozen circle
            radius: 0.1                # Radius of the circle
            n_vessels: 1               # Number of frozen particles in the circle
        force_blocking_threshold: 0.25 # Threshold for considering a particle blocked
        blocked_time_threshold: 0.0    # Time threshold (in simulation days) for terminating blocked paths
        terminal_velocity: 0.1

    # Path freezing configuration    
    path_freezer:
        freeze_interval: 10  # Steps between freezing positions

    # Path splitting configuration
    path_splitter:
        split_interval: 10     # Steps between checking for splits
        split_angle: 30         # Angle in degrees between split paths
        split_probability: 0.01  # Probability of eligible path splitting

    path_extinction:
        extinction_start_time: '2025-03-01'
        extinction_end_time: '2025-03-02'
        initial_freeze_probability: 0.05
        final_freeze_probability: 1
        check_interval: 30

    path_dla:
        dla_start_time: '2025-03-01'
        dla_end_time: '2025-04-01'
        stickiness: 1.0            # Probability of sticking when near frozen particle
        initial_near_radius: 0.04           # Distance for checking proximity to frozen particles
        final_near_radius: 0.03           # Distance for checking proximity to frozen particles

    frozen_repulsion:
        spring_constant: 0.5  # Spring constant for Hooke's law (force/distance)
        max_distance: 0.25  # Maximum distance for force calculation (acts as spring rest length)
        min_frozen_duration: 0.0  # Minimum duration (in days) a particle must be frozen to contribute to repulsion

    ellipsoid_containment:
        a: 2    # Ellipsoid x semi-major axis
        b: 1    # Ellipsoid y semi-major axis
        c: 0.1  # Ellipsoid z semi-major axis
        spring_constant: 5.0
    
    cylinder_exclusion:
        radius: 0.2  # Radius of the cylinder
        height: 0.4  # Height of the cylinder
        center: [-.5, 0.0, -0.2]  # Center of the cylinder
        direction: [0.0, 0.0, 1.0]  # Direction vector of the cylinder (default along z-axis)
        spring_constant: 5.0  # Spring constant for Hooke's law (force/distance)
        
    magnetic_repulsion:
        position:
            x: 3.0
            y: 0.0
            z: 0.0
        strength: 0.025
        min_distance: 0.1

    visualization:
        background_color: [0, 0, 0]
        particle_size: 2
        rotation_speed: 0.02
        particle_color: [0, 120, 120]
        projection_scale: 1000.0
        fps: 60
        ellipsoid_color: [150, 0, 150]
        cylinder_color: [0, 0, 150]
        ellipsoid_points: 15  # Number of points for wireframe detail
